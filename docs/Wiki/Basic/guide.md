# Docusaurusの基本設定

最低限のDocusaurusの開発ガイドについて以下に簡単にまとめます。

より詳細に知りたいという方は、[公式サイト](https://docusaurus.io/docs)をご確認ください。

---

### Docusaurusの初期設定

#### プロジェクトの作成

```bash
npx create-docusaurus@latest my-website classic
cd my-website
npm run start
```

サーバーが起動し、`http://localhost:3000`で確認できます。

#### 設定ファイルの編集

- `docusaurus.config.ts`でサイト全体の設定を行います。
  - `docusaurus.config.ts`の詳細は[こちら](https://docusaurus.io/docs/api/docusaurus-config)
  - このサイトの設定はこちら（細かくメモ書きしています。）

---

### ディレクトリ構造について

一般的なディレクトリ構成は下記の通りです。

```bash
my-website
├── blog
│   ├── 2019-05-28-hola.md
│   ├── 2019-05-29-hello-world.md
│   └── 2020-05-30-welcome.md
├── docs
│   ├── doc1.md
│   ├── doc2.md
│   ├── doc3.md
│   └── index.mdx
├── src
│   ├── css
│   │   └── custom.css
│   └── pages
│       ├── styles.module.css
│       └── index.tsx
├── static
│   └── img
├── docusaurus.config.ts
├── package.json
├── README.md
├── sidebars.ts
└── yarn.lock
```

**1. [`blog`フォルダ](https://docusaurus.io/docs/blog)**

- ブログ用のフォルダとなります。
- 本サイトでは使用していませんので、詳しくは公式サイトをご確認ください。

**2. [`docs`フォルダ](https://docusaurus.io/docs/docs-introduction)**

- ドキュメントは全てMarkdown形式で作成し、`docs`フォルダにカテゴリー別に保存します。
- 各カテゴリーのフォルダ配下に`_category_json`ファイルを置くことで、そのカテゴリのメタデータを定義できます。
- `/docs/index`のようにルーティングされます。

**3. [`src`フォルダ](https://docusaurus.io/docs/creating-pages)**

- サイト全体の外観や動作をカスタマイズするためのディレクトリです。
  - `pages`フォルダは、独自のReactコンポーネントを作成し、特定のURLパスに対応するカスタムページを作成するために使用します。
  - `components`フォルダは、複数のページで使用される再利用可能なReactコンポーネントを作成するために使用します。
    - 例）ヘッダー、フッター、ナビゲーションバーなど
  - `css`フォルダは、カスタムCSSファイルを配置し、サイトのスタイリングを定義するために使用します。

**4. [`static`フォルダ](https://docusaurus.io/docs/static-assets)**

- imgファイルなどの置き場に使用してください

**5. [`docusaurus.config.ts`ファイル](https://docusaurus.io/docs/api/docusaurus-config)**

- Docusaurusサイトの全体的な設定を管理するためのファイルです。
- サイトのタイトル、URL、ナビゲーション、テーマ、プラグインなどを設定します。

**6. [`sidebar.ts`ファイル](https://docusaurus.io/docs/sidebar)**

- サイドバーの構造を定義するためのファイルです。
- カテゴリーやドキュメントの順序、ネストを設定します。

---

### サイドバーについて

サイドバーは2通りの作成方法があります。

#### 1. Autogenerated

ディレクトリ構成からサイドバーを自動生成することができます。\
デフォルトではこちらに設定されています。

```javascript
export default {
  myAutogeneratedSidebar: [
    {
      type: 'autogenerated',
      dirName: '.', // '.' means the current docs folder
    },
  ],
};
```

サイドバーのラベルや、順番などは各ページにメタデータを追加することで調整します。

```markdown
---
sidebar_position: 2
sidebar_label: Easy
sidebar_class_name: green
---

# Easy Tutorial

This is the easy tutorial!
```

#### 2. Sidebar Object

`sidebar.ts`にラベルや順番などをすべて定義し、サイドバーを作成します。\
**本ドキュメントサイトではこちらを採用しています。**

書き方について詳しくは[こちら](https://docusaurus.io/docs/sidebar/items)を参照してください

```javascript
export default {
  mySidebar: [
    {
      type: 'category',
      label: 'Getting Started',
      items: [
        {
          type: 'doc',
          id: 'doc1',
        },
      ],
    },
    {
      type: 'category',
      label: 'Docusaurus',
      items: [
        {
          type: 'doc',
          id: 'doc2',
        },
        {
          type: 'doc',
          id: 'doc3',
        },
      ],
    },
    {
      type: 'link',
      label: 'Learn more',
      href: 'https://example.com',
    },
  ],
};
```

---

### バージョン管理について

バージョンCLIを使用すると、現在のdocsディレクトリに基づき、新しいバージョンのドキュメントを作成することができます。\
docsディレクトリのドキュメントが進化し続けても、そのドキュメントの特定のセットは保存されており、アクセス可能になります。

ディレクトリ構成は次の通りです。

```bash
website
├── sidebars.json        # sidebar for the current docs version
├── docs                 # docs directory for the current docs version
│   ├── foo
│   │   └── bar.md       # https://mysite.com/docs/next/foo/bar
│   └── hello.md         # https://mysite.com/docs/next/hello
├── versions.json        # file to indicate what versions are available
├── versioned_docs
│   ├── version-1.1.0
│   │   ├── foo
│   │   │   └── bar.md   # https://mysite.com/docs/foo/bar
│   │   └── hello.md
│   └── version-1.0.0
│       ├── foo
│       │   └── bar.md   # https://mysite.com/docs/1.0.0/foo/bar
│       └── hello.md
├── versioned_sidebars
│   ├── version-1.1.0-sidebars.json
│   └── version-1.0.0-sidebars.json
├── docusaurus.config.js
└── package.json
```

バージョンの作成方法および更新方法については[こちら](https://docusaurus.io/docs/versioning)から

:::note warn

バージョンの作成や更新は、ディレクトリ構成がより複雑になるため、
更新頻度は少なくすることをおススメします。

:::
